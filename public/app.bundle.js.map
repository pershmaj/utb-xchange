{"version":3,"sources":["webpack:///./app/app.ts","webpack:///./app/firebaseConfig.ts","webpack:///./styles/app.scss","webpack:///./app/createDom.ts","webpack:///./app/Filter.class.ts"],"names":[],"mappings":"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","file":"app.bundle.js","sourcesContent":["import * as firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/database\";\r\nimport { firebaseConfig } from \"./firebaseConfig\";\r\nimport {IUniversity} from '../../functions/src/interfaces';\r\nimport {createList, createUniversityGroup, toggleLoading} from './createDom';\r\n// import { Observable } from 'rxjs';\r\nconst app = firebase.initializeApp(firebaseConfig);\r\nconst db = app.database();\r\nimport FilterProxy from './Filter.class';\r\n\r\nasync function init() {\r\n    const data = (await db.ref('/university').once('value')).val();\r\n    const uni:IUniversity[] = Object.values(data);\r\n    FilterProxy.items = uni;\r\n\r\n    const countries = [...new Set(uni.map(item => item.country))];\r\n\r\n    const spec = [...new Set(uni.map(item => item.detail.speciality)\r\n        .reduce((acc, val) => acc.concat(val)))];\r\n\r\n    createUniversityGroup(FilterProxy.filter())\r\n    createList(countries, FilterProxy, 'countries', 'countries');\r\n    createList(spec, FilterProxy, 'spec', 'spec');\r\n\r\n\r\n    toggleLoading();\r\n\r\n\r\n}\r\n\r\ninit();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/app.ts","export const firebaseConfig = {\r\n    apiKey: \"AIzaSyCD0w3MQyetO4C0fhSt7627O9qis_M40-g\",\r\n    authDomain: \"graphviz-ce66e.firebaseapp.com\",\r\n    databaseURL: \"https://graphviz-ce66e.firebaseio.com\",\r\n    projectId: \"graphviz-ce66e\",\r\n    storageBucket: \"graphviz-ce66e.appspot.com\",\r\n    messagingSenderId: \"138186212504\",\r\n    appId: \"1:138186212504:web:a264ef59a284a2e917bced\",\r\n    measurementId: \"G-Z0C5W5WX25\"\r\n  };\n\n\n// WEBPACK FOOTER //\n// ./app/firebaseConfig.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./styles/app.scss\n// module id = 344\n// module chunks = 0","import { IUniversity } from \"../../functions/src/interfaces\";\r\n\r\nconst universitiesNode = document.getElementById('universitiesNode');\r\n//TODO: FIX any\r\nfunction createNode(tag: string, options:any ) {\r\n    return Object.assign(document.createElement(tag), options);\r\n}\r\n\r\nfunction toggleClass(classname) {\r\n    this.className.includes(classname) \r\n        ? this.classList.remove(classname)\r\n        : this.classList.add(classname);\r\n}\r\n\r\nexport function toggleLoading() {\r\n    const app = document.getElementById('app');\r\n    const spinner = document.getElementById('spinner');\r\n    toggleClass.call(app, 'd-none');\r\n    toggleClass.call(spinner, 'd-none');\r\n}\r\n\r\nfunction createCountryCard(el:IUniversity) {\r\n    var card = createNode('div', {className: 'card'});\r\n    var img = createNode('img', {className: 'card-img-top'});\r\n\r\n    var cardBody = createNode('div', {className: 'card-body'});\r\n\r\n    [\r\n        { tag: 'h5', options: {innerHTML: el.name}},\r\n        { tag: 'p', options: {innerHTML: `${el.city} in ${el.country}` , className: 'card-text', }},\r\n        { tag: 'p', options: {innerHTML: el.stars + ' stars'}},\r\n        { tag: 'a', options: {href: '#', className: 'btn btn-primary', innerHTML: 'More information'}}\r\n    ].forEach(el => {\r\n        cardBody.appendChild(createNode(el.tag, el.options));\r\n    });\r\n    \r\n    card.appendChild(img);\r\n    card.appendChild(cardBody);\r\n    return card;\r\n}\r\n\r\nexport function createUniversityGroup(univers) {\r\n    // let groups = [];\r\n    // let groupSize = 6;\r\n    let cardGroupClass = 'card-columns';\r\n    universitiesNode.innerHTML = '';\r\n\r\n    // for(let i = 0; i < univers.length; i+=groupSize ) {\r\n    //     groups.push(univers.slice(i, i+groupSize));\r\n    // }\r\n    let cardGroupNode = createNode('div', {className: cardGroupClass, style: 'margin-top: 30px'});\r\n    univers.forEach(univerNode => {\r\n        \r\n        // univerNodesGroup.forEach(univerNode=> {\r\n            // cardGroupNode.appendChild(createCountryCard(univerNode));\r\n        // });\r\n        cardGroupNode.appendChild(createCountryCard(univerNode));\r\n    });\r\n    universitiesNode.appendChild(cardGroupNode);\r\n}\r\n\r\nexport function createList(arr, FilterProxy, propName, nodeId) {\r\n    const handler = function(e:MouseEvent) {\r\n        e.preventDefault();\r\n        let filter = this.getAttribute('data-js');\r\n        toggleClass.call(this, 'active');\r\n        FilterProxy[propName] = filter; //starts rebuilding\r\n    }\r\n\r\n    arr.forEach((val) => {\r\n        const node = createNode('li', {\r\n            className: 'list-group-item list-group-item-action',\r\n            innerHTML: val,\r\n            onclick: handler,\r\n        })\r\n        node.setAttribute('data-js', val);\r\n\r\n        document.getElementById(nodeId).appendChild(node);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/createDom.ts","import { IUniversity } from \"../../functions/src/interfaces\";\r\nimport { createUniversityGroup } from \"./createDom\";\r\n\r\n\r\nconst Filter = {\r\n    countries: <Set<string>> new Set(),\r\n    spec: <Set<string>> new Set(),\r\n    items: <IUniversity[]> [],\r\n    filter: () =>  {\r\n        const countryFilter= (u) => !Filter.countries.size || Filter.countries.has(u.country);\r\n\r\n        const specFilter = (u) => (!Filter.spec.size || u.detail.speciality && u.detail.speciality.length) \r\n            && u.detail.speciality.filter(a => Filter.spec.has(a)).length;\r\n\r\n        if(!!Filter.countries.size || !!Filter.spec.size) {\r\n            return Filter.items.filter(u => countryFilter(u) && specFilter(u));\r\n        } else {\r\n            return Filter.items; //if filters not seted\r\n        }\r\n    },\r\n    clearFilters:() => {\r\n        for (let prop in Filter) { \r\n            if(Filter[prop] instanceof Set) {\r\n                Filter[prop].empty();\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nconst FilterProxy = new Proxy(Filter, {\r\n    set(target, prop, value) {\r\n        if(prop in target) {\r\n            if(target[prop] instanceof Set) { // filter properties\r\n                target[prop].has(value) ? target[prop].delete(value) : target[prop].add(value);\r\n                createUniversityGroup(target.filter())\r\n            } else { // items\r\n                target[prop] = value;\r\n            }\r\n            return true;\r\n        } else {\r\n            throw new Error(`There is no prop ${String(prop)} in Filter object`);\r\n        }\r\n    },\r\n});\r\n\r\nexport default FilterProxy;\n\n\n// WEBPACK FOOTER //\n// ./app/Filter.class.ts"],"sourceRoot":""}